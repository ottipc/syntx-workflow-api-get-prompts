#!/bin/bash

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SYNTX API ULTIMATE COMPLETE TEST - ALL 30+ ENDPOINTS
# Complete system analysis with full payloads, metrics, descriptions
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

BASE_URL="https://dev.syntx-system.com"
TIMESTAMP=$(date -Iseconds)

# Array to store endpoint test results
declare -a ENDPOINT_RESULTS

# Function to test endpoint and record result
test_endpoint() {
    local method=$1
    local endpoint=$2
    local data=$3
    
    if [ "$method" = "POST" ]; then
        response=$(curl -s -w "\n%{http_code}" -X POST "$BASE_URL$endpoint" \
            -H "Content-Type: application/json" \
            -d "$data" 2>/dev/null)
    else
        response=$(curl -s -w "\n%{http_code}" "$BASE_URL$endpoint" 2>/dev/null)
    fi
    
    http_code=$(echo "$response" | tail -n1)
    body=$(echo "$response" | sed '$d')
    
    # Record result
    if [ "$http_code" = "200" ]; then
        ENDPOINT_RESULTS+=("โ $method $endpoint โ 200 OK")
    elif [ "$http_code" = "404" ]; then
        ENDPOINT_RESULTS+=("โ $method $endpoint โ 404 NOT FOUND")
    elif [ "$http_code" = "500" ]; then
        ENDPOINT_RESULTS+=("๐ด $method $endpoint โ 500 ERROR")
    else
        ENDPOINT_RESULTS+=("โ๏ธ  $method $endpoint โ $http_code")
    fi
    
    echo "$body"
}

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ                                                                   โ"
echo "โ          ๐ SYNTX COMPLETE API TEST - ALL ENDPOINTS ๐            โ"
echo "โ                                                                   โ"
echo "โ  Timestamp: $TIMESTAMP                           โ"
echo "โ  Base URL: $BASE_URL                              โ"
echo "โ  Endpoints: 30+                                                   โ"
echo "โ  Mode: FULL PAYLOADS + METRICS + DESCRIPTIONS                     โ"
echo "โ                                                                   โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SYSTEM STATE
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ                     ๐ SYSTEM STATE                               โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Queue Status:"
echo "  - Incoming:   $(ls /opt/syntx-workflow-api-get-prompts/queue/incoming/*.txt 2>/dev/null | grep -v response | wc -l) jobs"
echo "  - Processing: $(ls /opt/syntx-workflow-api-get-prompts/queue/processing/*.txt 2>/dev/null | wc -l) jobs"
echo "  - Processed:  $(ls /opt/syntx-workflow-api-get-prompts/queue/processed/*.json 2>/dev/null | wc -l) jobs"
echo "  - Errors:     $(ls /opt/syntx-workflow-api-get-prompts/queue/error/*.txt 2>/dev/null | wc -l) jobs"
echo ""
echo "System Info:"
echo "  - Disk Usage: $(du -sh /opt/syntx-workflow-api-get-prompts 2>/dev/null | cut -f1)"
echo "  - API Running: $(pgrep -f 'syntx_api_production' > /dev/null && echo 'โ YES' || echo 'โ NO')"
echo "  - Cronjobs: $(crontab -l 2>/dev/null | grep syntx | wc -l) active"
echo ""
echo "Git Status:"
echo "  - Branch: $(cd /opt/syntx-workflow-api-get-prompts && git branch --show-current 2>/dev/null)"
echo "  - Last Commit: $(cd /opt/syntx-workflow-api-get-prompts && git log -1 --oneline 2>/dev/null)"
echo "  - Uncommitted: $(cd /opt/syntx-workflow-api-get-prompts && git status --short 2>/dev/null | wc -l) files"
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 1: HEALTH & STATUS
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ              SECTION 1: HEALTH & STATUS (2 ENDPOINTS)            โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 1. HEALTH
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "1/30: ๐ฅ HEALTH CHECK"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/health"
echo "Description: System health, version, queue accessibility"
echo "Use Case: Quick system status check"
echo ""
HEALTH=$(test_endpoint "GET" "/health")
echo "FULL PAYLOAD:"
echo "$HEALTH" | jq '.'
echo ""
echo "KEY METRICS:"
echo "  Status: $(echo "$HEALTH" | jq -r '.status')"
echo "  Version: $(echo "$HEALTH" | jq -r '.api_version')"
echo "  Queue Accessible: $(echo "$HEALTH" | jq -r '.queue_accessible')"
echo ""
echo ""

# 2. ROOT
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "2/30: ๐ ROOT ENDPOINT"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/"
echo "Description: Same as /health (alias)"
echo ""
ROOT=$(test_endpoint "GET" "/")
echo "$ROOT" | jq '{status, api_version}'
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 2: MONITORING (NEW!)
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ              SECTION 2: MONITORING (1 ENDPOINT) ๐               โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 3. LIVE QUEUE MONITOR
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "3/30: ๐ก LIVE QUEUE MONITOR (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/monitoring/live-queue"
echo "Description: Real-time queue status, processing jobs, recent completions"
echo "Use Case: Monitor system activity, detect stuck jobs"
echo ""
MONITOR=$(test_endpoint "GET" "/monitoring/live-queue")
if echo "$MONITOR" | jq -e '.status' > /dev/null 2>&1; then
  echo "FULL PAYLOAD:"
  echo "$MONITOR" | jq '.'
  echo ""
  echo "KEY METRICS:"
  echo "  System Health: $(echo "$MONITOR" | jq -r '.system_health')"
  echo "  Incoming: $(echo "$MONITOR" | jq -r '.queue.incoming')"
  echo "  Processing: $(echo "$MONITOR" | jq -r '.queue.processing')"
  echo "  Jobs/Hour: $(echo "$MONITOR" | jq -r '.performance.jobs_per_hour')"
else
  echo "โ๏ธ  ENDPOINT NOT AVAILABLE (404)"
fi
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 3: PROMPTS ADVANCED (NEW!)
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ         SECTION 3: PROMPTS ADVANCED (6 ENDPOINTS) ๐             โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 4. PREDICT SCORE
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "4/30: ๐ฎ PREDICT SCORE (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: POST $BASE_URL/prompts/advanced/predict-score"
echo "Description: Predict quality score BEFORE processing"
echo "Use Case: Test prompt quality, optimize before processing"
echo ""
PREDICT=$(test_endpoint "POST" "/prompts/advanced/predict-score" '{
  "prompt_text": "**TIER-1 TIER-2 TIER-3 TIER-4** Driftkรถrper Kalibrierung Strรถmung Resonanzfeld",
  "topic": "technologie",
  "style": "kreativ"
}')
echo "FULL PAYLOAD:"
echo "$PREDICT" | jq '.'
echo ""
echo "KEY METRICS:"
echo "  Predicted Score: $(echo "$PREDICT" | jq -r '.predicted_score')"
echo "  Confidence: $(echo "$PREDICT" | jq -r '.confidence')"
echo "  Keywords: $(echo "$PREDICT" | jq -r '.analysis.total_keywords')"
echo ""
echo ""

# 5. FIELD MISSING ANALYSIS
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "5/30: ๐ FIELD MISSING ANALYSIS (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/advanced/fields-missing-analysis"
echo "Description: Which fields are NOT being detected"
echo "Use Case: Debug field detection, fix wrapper issues"
echo ""
FIELDS=$(test_endpoint "GET" "/prompts/advanced/fields-missing-analysis")
echo "FULL PAYLOAD:"
echo "$FIELDS" | jq '.'
echo ""
echo "CRITICAL ISSUES:"
echo "$FIELDS" | jq -r '.fields_by_detection_rate[:3] | .[] | "  โ๏ธ  \(.field): \(.detection_rate)%"'
echo ""
echo ""

# 6. KEYWORD COMBINATIONS
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "6/30: ๐ฅ KEYWORD COMBINATIONS (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/advanced/keyword-combinations"
echo "Description: Best keyword combinations for high scores"
echo "Use Case: Find power combos (e.g. tier + kalibrierung)"
echo ""
COMBOS=$(test_endpoint "GET" "/prompts/advanced/keyword-combinations")
echo "FULL PAYLOAD:"
echo "$COMBOS" | jq '.'
echo ""
echo ""

# 7. TEMPLATES BY SCORE
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "7/30: ๐ TEMPLATES BY SCORE (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/advanced/templates-by-score?min_score=90"
echo "Description: Extract patterns from high-scoring prompts"
echo "Use Case: Learn from best prompts, copy patterns"
echo ""
TEMPLATES=$(test_endpoint "GET" "/prompts/advanced/templates-by-score?min_score=90")
echo "FULL PAYLOAD:"
echo "$TEMPLATES" | jq '.'
echo ""
echo ""

# 8. OPTIMAL WRAPPER PER TOPIC
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "8/30: ๐ฏ OPTIMAL WRAPPER PER TOPIC (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/advanced/optimal-wrapper-for-topic"
echo "Description: Which wrapper performs best per topic"
echo "Use Case: Optimize wrapper routing"
echo ""
WRAPPER_OPT=$(test_endpoint "GET" "/prompts/advanced/optimal-wrapper-for-topic")
echo "FULL PAYLOAD:"
echo "$WRAPPER_OPT" | jq '.'
echo ""
echo ""

# 9. EVOLUTION LEARNING CURVE
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "9/30: ๐ง EVOLUTION LEARNING CURVE (NEW!)"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/advanced/evolution-learning-curve"
echo "Description: Track system learning over time"
echo "Use Case: Proof of evolution, track improvement"
echo ""
CURVE=$(test_endpoint "GET" "/prompts/advanced/evolution-learning-curve")
echo "FULL PAYLOAD:"
echo "$CURVE" | jq '.'
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 4: PROMPTS
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ              SECTION 4: PROMPTS (7 ENDPOINTS)                     โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 10. COMPLETE EXPORT
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "10/30: ๐ฆ COMPLETE EXPORT"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/complete-export?page=1&page_size=2"
echo "Description: Full prompts + responses + scores with pagination"
echo ""
EXPORT=$(test_endpoint "GET" "/prompts/complete-export?page=1&page_size=2")
echo "FULL PAYLOAD:"
echo "$EXPORT" | jq '.'
echo ""
echo ""

# 11. TABLE VIEW
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "11/30: ๐ TABLE VIEW"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/table-view?limit=5"
echo ""
TABLE=$(test_endpoint "GET" "/prompts/table-view?limit=5")
echo "$TABLE" | jq '.'
echo ""
echo ""

# 12. PROMPTS ALL
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "12/30: ๐ PROMPTS ALL"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/all?limit=5"
echo ""
ALL_PROMPTS=$(test_endpoint "GET" "/prompts/all?limit=5")
echo "$ALL_PROMPTS" | jq '.'
echo ""
echo ""

# 13. PROMPTS BEST
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "13/30: ๐ PROMPTS BEST"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/best?limit=5"
echo ""
BEST=$(test_endpoint "GET" "/prompts/best?limit=5")
echo "$BEST" | jq '.'
echo ""
echo ""

# 14. FIELD BREAKDOWN
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "14/30: ๐ฌ FIELD BREAKDOWN"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/fields/breakdown"
echo ""
BREAKDOWN=$(test_endpoint "GET" "/prompts/fields/breakdown")
echo "$BREAKDOWN" | jq '.'
echo ""
echo ""

# 15. COSTS TOTAL
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "15/30: ๐ฐ COSTS TOTAL"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/costs/total"
echo ""
COSTS=$(test_endpoint "GET" "/prompts/costs/total")
echo "$COSTS" | jq '.'
echo ""
echo ""

# 16. SEARCH
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "16/30: ๐ SEARCH"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/prompts/search?q=tier"
echo ""
SEARCH=$(test_endpoint "GET" "/prompts/search?q=tier")
echo "$SEARCH" | jq '.'
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 5: ANALYTICS
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ              SECTION 5: ANALYTICS (6 ENDPOINTS)                   โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 17. COMPLETE DASHBOARD
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "17/30: ๐ ANALYTICS COMPLETE DASHBOARD"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/analytics/complete-dashboard"
echo ""
DASHBOARD=$(test_endpoint "GET" "/analytics/complete-dashboard")
echo "$DASHBOARD" | jq '{status, system_health, success_stories, failures}'
echo ""
echo ""

# 18. OVERVIEW
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "18/30: ๐ ANALYTICS OVERVIEW"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/analytics/overview"
echo ""
OVERVIEW=$(test_endpoint "GET" "/analytics/overview")
echo "$OVERVIEW" | jq '.'
echo ""
echo ""

# 19. TOPICS
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "19/30: ๐ ANALYTICS TOPICS"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/analytics/topics"
echo ""
TOPICS=$(test_endpoint "GET" "/analytics/topics")
echo "$TOPICS" | jq '.'
echo ""
echo ""

# 20. SCORES DISTRIBUTION
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "20/30: ๐ SCORES DISTRIBUTION"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/analytics/scores/distribution"
echo ""
DISTRIBUTION=$(test_endpoint "GET" "/analytics/scores/distribution")
echo "$DISTRIBUTION" | jq '.'
echo ""
echo ""

# 21. SUCCESS RATE
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "21/30: โ SUCCESS RATE"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/analytics/success-rate"
echo ""
SUCCESS=$(test_endpoint "GET" "/analytics/success-rate")
echo "$SUCCESS" | jq '.'
echo ""
echo ""

# 22. SUCCESS RATE BY WRAPPER
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "22/30: ๐ฆ SUCCESS RATE BY WRAPPER"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/analytics/success-rate/by-wrapper"
echo ""
SUCCESS_WRAPPER=$(test_endpoint "GET" "/analytics/success-rate/by-wrapper")
echo "$SUCCESS_WRAPPER" | jq '.'
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 6: EVOLUTION
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ              SECTION 6: EVOLUTION (3 ENDPOINTS)                   โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 23. SYNTX VS NORMAL
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "23/30: ๐งฌ SYNTX VS NORMAL"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/evolution/syntx-vs-normal"
echo ""
SYNTX_VS=$(test_endpoint "GET" "/evolution/syntx-vs-normal")
echo "$SYNTX_VS" | jq '.'
echo ""
echo ""

# 24. KEYWORD POWER
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "24/30: โก KEYWORD POWER"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/evolution/keywords/power"
echo ""
KEYWORDS=$(test_endpoint "GET" "/evolution/keywords/power")
echo "$KEYWORDS" | jq '{status, most_powerful: .most_powerful[:3]}'
echo ""
echo ""

# 25. TOPIC RESONANCE
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "25/30: ๐ฏ TOPIC RESONANCE"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/evolution/topics/resonance"
echo ""
RESONANCE=$(test_endpoint "GET" "/evolution/topics/resonance")
echo "$RESONANCE" | jq '{status, topics: .topics[:3]}'
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# SECTION 7: COMPARE, FELD, RESONANZ, GENERATION
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ         SECTION 7: COMPARE, FELD, RESONANZ, GENERATION           โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# 26. COMPARE WRAPPERS
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "26/30: ๐ COMPARE WRAPPERS"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/compare/wrappers"
echo ""
COMPARE=$(test_endpoint "GET" "/compare/wrappers")
echo "$COMPARE" | jq '{status}'
echo ""
echo ""

# 27. FELD DRIFT
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "27/30: ๐ FELD DRIFT"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/feld/drift"
echo ""
DRIFT=$(test_endpoint "GET" "/feld/drift")
echo "$DRIFT" | jq '{status, count}'
echo ""
echo ""

# 28. RESONANZ QUEUE
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "28/30: ๐ RESONANZ QUEUE"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/resonanz/queue"
echo ""
RESONANZ_Q=$(test_endpoint "GET" "/resonanz/queue")
echo "$RESONANZ_Q" | jq '.'
echo ""
echo ""

# 29. RESONANZ SYSTEM
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "29/30: ๐ RESONANZ SYSTEM"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/resonanz/system"
echo ""
RESONANZ_S=$(test_endpoint "GET" "/resonanz/system")
echo "$RESONANZ_S" | jq '.'
echo ""
echo ""

# 30. GENERATION PROGRESS
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "30/30: ๐ GENERATION PROGRESS"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "URL: GET $BASE_URL/generation/progress"
echo ""
PROGRESS=$(test_endpoint "GET" "/generation/progress")
echo "$PROGRESS" | jq '.'
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# FINAL SUMMARY
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo ""
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ                     โ TEST COMPLETE                              โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "Report Generated: $TIMESTAMP"
echo "Total Endpoints Tested: 30"
echo ""
echo ""

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# ENDPOINT STATUS SUMMARY
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ                  ๐ ENDPOINT STATUS SUMMARY                       โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
for result in "${ENDPOINT_RESULTS[@]}"; do
    echo "$result"
done
echo ""
echo "Legend: โ = 200 OK | โ = 404 NOT FOUND | ๐ด = 500 ERROR | โ๏ธ = OTHER"
echo ""

